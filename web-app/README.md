# Yapgan Web App

Modern React web application for note-taking and personal knowledge management, built from Stitch AI generated designs with full backend API integration.

## 🎨 Features

- **Authentication**: Login/Register with JWT tokens
- **Dashboard**: Real-time stats from API (notes count, collections, inbox)
- **Notes Browser**: Browse all notes from backend with pagination
- **Tag Filtering**: Filter notes by tags loaded from API
- **API Integration**: Full REST API integration with the Go backend
- **Modern UI**: Tailwind CSS with Inter font family
- **Dark Mode Support**: Based on system preferences
- **Responsive Design**: Works on desktop and mobile

## 🛠️ Tech Stack

- React 18 with TypeScript
- Vite for fast development
- React Router for navigation
- Tailwind CSS for styling
- REST API integration

## 📦 Installation

```bash
# Install dependencies
npm install

# Copy environment file
cp .env.example .env

# Update .env with your API URL (default: http://localhost:8080)
```

## 🚀 Development

### Start Backend API First

```bash
# In the root project directory
docker-compose up -d  # Start PostgreSQL
go run cmd/api/main.go  # Start API server on :8080
```

### Then Start Frontend

```bash
# In web-app directory
npm run dev
```

The app will be available at `http://localhost:5173`

### First Time Setup

1. Navigate to `http://localhost:5173`
2. You'll be redirected to `/login`
3. Create an account (register)
4. Start creating notes!

## 🔌 API Integration

The app connects to the Go backend API at `http://localhost:8080` (configurable via `.env`):

### Environment Variables

```bash
# .env
VITE_API_URL=http://localhost:8080
```

### API Endpoints Used

- `POST /api/auth/register` - User registration
- `POST /api/auth/login` - User login
- `GET /api/notes` - List notes with pagination and filtering
- `GET /api/notes/:id` - Get single note
- `GET /api/tags` - Get all tags
- `POST /api/notes` - Create note (future feature)
- `PUT /api/notes/:id` - Update note (future feature)
- `DELETE /api/notes/:id` - Delete note (future feature)

### Authentication

The app uses JWT tokens stored in localStorage:

- Token is automatically included in all API requests
- Automatically redirects to login on 401 errors
- Token persists across page refreshes

## 🏗️ Build

```bash
# Build for production
npm run build

# Preview production build
npm run preview
```

## 📁 Project Structure

```
web-app/
├── src/
│   ├── components/          # Reusable components
│   │   └── Sidebar.tsx
│   ├── pages/               # Page components
│   │   ├── Dashboard.tsx    # Dashboard with API stats
│   │   ├── Notes.tsx        # Notes list with API integration
│   │   ├── NoteDetail.tsx   # Note detail view
│   │   └── Login.tsx        # Login/Register page
│   ├── services/            # API service layer
│   │   └── api.ts           # API client with all endpoints
│   ├── App.tsx              # Main app with routing & auth
│   ├── main.tsx             # Entry point
│   └── index.css            # Global styles
├── .env                     # Environment variables
├── .env.example             # Environment template
├── index.html               # HTML template with Tailwind CDN
├── vite.config.ts           # Vite configuration
├── tsconfig.json            # TypeScript configuration
└── package.json
```

## 📄 Pages

### Login (`/login`)

- Login or register form
- JWT token management
- Automatic redirect on success

### Dashboard (`/`)

- Real-time note count from API
- Recent notes activity
- Quick action buttons
- **Protected Route** - requires authentication

### Notes (`/notes`)

- List all notes from API
- Pagination controls
- Tag filtering (loads tags from API)
- Displays note title, created date, and tags
- **Protected Route** - requires authentication

### Note Detail (`/notes/:id`)

- Full note content (currently placeholder)
- Future: Will load from API
- **Protected Route** - requires authentication

## 🎨 Design

Based on designs generated by **Stitch AI**:

- Clean, modern interface
- Primary blue (#137fec)
- Consistent spacing and typography
- Smooth transitions

## ✅ API Integration Status

- ✅ User authentication (login/register)
- ✅ Protected routes with JWT
- ✅ List all notes with pagination
- ✅ Filter notes by tags
- ✅ Load tags from API
- ✅ Real-time stats on dashboard
- ⏳ Note detail view (API ready, UI pending)
- ⏳ Search functionality (API ready, UI pending)
- ⏳ Create/Edit/Delete notes (API ready, UI pending)

## 🔧 Troubleshooting

### API Connection Issues

1. Make sure backend is running on port 8080
2. Check `.env` file has correct `VITE_API_URL`
3. Check browser console for CORS errors
4. Verify backend CORS settings allow `localhost:5173`

### Authentication Issues

1. Clear localStorage: `localStorage.clear()`
2. Register a new account
3. Check API logs for authentication errors

## 📝 Notes

- Uses Tailwind CSS via CDN for quick setup
- TypeScript for type safety
- JWT tokens in localStorage (consider httpOnly cookies for production)
- API service handles token refresh and logout on 401

## 📜 License

MIT
